function default_buzzfeed_id(){return void 0}function init_pound(){return"undefined"==typeof bf_login||"undefined"==typeof BF_User?(20>pound_retries&&setTimeout(init_pound,1e3),pound_retries+=1,!1):(pound.VERIFY_IDENTITIES&&(pound.LOGGED_IN_ONLY&&(new BF_User).isLoggedIn()||!pound.LOGGED_IN_ONLY?window.bf_visit.processCascadeSegment():bf_login.loggedInCallbacks.push(window.bf_visit.processCascadeSegment)),window.bf_widgets.process(),!1)}function registerWithBuzzLoader(){"undefined"!=typeof BuzzLoader?BuzzLoader.register(init_pound,5):"undefined"!=typeof bfjs&&bfjs.isMobile()?init_pound():setTimeout(registerWithBuzzLoader,500)}!function(e){function o(){try{return r in e&&e[r]}catch(t){return!1}}function l(e){return function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(s),u.appendChild(s),s.addBehavior("#default#userData"),s.load(r);var i=e.apply(t,n);return u.removeChild(s),i}}function h(e){return e.replace(/^d/,"___$&").replace(c,"___")}var s,t={},n=e.document,r="localStorage",i="script";if(t.disabled=!1,t.set=function(e,t){},t.get=function(e){},t.remove=function(e){},t.clear=function(){},t.transact=function(e,n,r){var i=t.get(e);null==r&&(r=n,n=null),"undefined"==typeof i&&(i=n||{}),r(i),t.set(e,i)},t.getAll=function(){},t.forEach=function(){},t.serialize=function(e){return JSON.stringify(e)},t.deserialize=function(e){if("string"!=typeof e)return void 0;try{return JSON.parse(e)}catch(t){return e||void 0}},o())s=e[r],t.set=function(e,n){return void 0===n?t.remove(e):(s.setItem(e,t.serialize(n)),n)},t.get=function(e){return t.deserialize(s.getItem(e))},t.remove=function(e){s.removeItem(e)},t.clear=function(){s.clear()},t.getAll=function(){var e={};return t.forEach(function(t,n){e[t]=n}),e},t.forEach=function(e){for(var n=0;n<s.length;n++){var r=s.key(n);e(r,t.get(r))}};else if(n.documentElement.addBehavior){var u,a;try{a=new ActiveXObject("htmlfile"),a.open(),a.write("<"+i+">document.w=window</"+i+'><iframe src="/favicon.ico"></iframe>'),a.close(),u=a.w.frames[0].document,s=u.createElement("div")}catch(f){s=n.createElement("div"),u=n.body}var c=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");t.set=l(function(e,n,i){return n=h(n),void 0===i?t.remove(n):(e.setAttribute(n,t.serialize(i)),e.save(r),i)}),t.get=l(function(e,n){return n=h(n),t.deserialize(e.getAttribute(n))}),t.remove=l(function(e,t){t=h(t),e.removeAttribute(t),e.save(r)}),t.clear=l(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(r);for(var i,n=0;i=t[n];n++)e.removeAttribute(i.name);e.save(r)}),t.getAll=function(e){var n={};return t.forEach(function(e,t){n[e]=t}),n},t.forEach=l(function(e,n){for(var s,r=e.XMLDocument.documentElement.attributes,i=0;s=r[i];++i)n(s.name,t.deserialize(e.getAttribute(s.name)))})}try{var p="__storejs__";t.set(p,p),t.get(p)!=p&&(t.disabled=!0),t.remove(p)}catch(f){t.disabled=!0}t.enabled=!t.disabled,"undefined"!=typeof module&&module.exports&&this.module!==module?module.exports=t:"function"==typeof define&&define.amd?define(t,[]):e.store=t}(Function("return this")());var Base64={_Rixits:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+/",fromNumber:function(number){if(isNaN(Number(number))||null===number||number===Number.POSITIVE_INFINITY)throw"The input is not valid";if(0>number)throw"Can't represent negative numbers now";for(var rixit,residual=Math.floor(number),result="";;)if(rixit=residual%64,result=this._Rixits.charAt(rixit)+result,residual=Math.floor(residual/64),0==residual)break;return result},toNumber:function(rixits){var result=0;rixits=rixits.split("");for(e in rixits)result=64*result+this._Rixits.indexOf(rixits[e]);return result},_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(input){("undefined"==typeof input||null==input)&&(input="");var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output="",i=0;for(input=Base64._utf8_encode(input);i<input.length;)chr1=input.charCodeAt(i++),chr2=input.charCodeAt(i++),chr3=input.charCodeAt(i++),enc1=chr1>>2,enc2=(3&chr1)<<4|chr2>>4,enc3=(15&chr2)<<2|chr3>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4);return output},decode:function(input){if("undefined"==typeof input||null==input)return"";var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output="",i=0;for(input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<input.length;)enc1=this._keyStr.indexOf(input.charAt(i++)),enc2=this._keyStr.indexOf(input.charAt(i++)),enc3=this._keyStr.indexOf(input.charAt(i++)),enc4=this._keyStr.indexOf(input.charAt(i++)),chr1=enc1<<2|enc2>>4,chr2=(15&enc2)<<4|enc3>>2,chr3=(3&enc3)<<6|enc4,output+=String.fromCharCode(chr1),64!=enc3&&(output+=String.fromCharCode(chr2)),64!=enc4&&(output+=String.fromCharCode(chr3));return output=Base64._utf8_decode(output)},_utf8_encode:function(string){string=string.replace(/\r\n/g,"\n");for(var utftext="",n=0;n<string.length;n++){var c=string.charCodeAt(n);128>c?utftext+=String.fromCharCode(c):c>127&&2048>c?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(63&c|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(63&c|128))}return utftext},_utf8_decode:function(utftext){for(var string="",i=0,c=c1=c2=0;i<utftext.length;)c=utftext.charCodeAt(i),128>c?(string+=String.fromCharCode(c),i++):c>191&&224>c?(c2=utftext.charCodeAt(i+1),string+=String.fromCharCode((31&c)<<6|63&c2),i+=2):(c2=utftext.charCodeAt(i+1),c3=utftext.charCodeAt(i+2),string+=String.fromCharCode((15&c)<<12|(63&c2)<<6|63&c3),i+=3);return string}},CryptoJS=CryptoJS||function(h,r){var k={},l=k.lib={},n=function(){},f=l.Base={extend:function(a){n.prototype=this;var b=new n;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},j=l.WordArray=f.extend({init:function(a,b){a=this.words=a||[],this.sigBytes=b!=r?b:4*a.length},toString:function(a){return(a||s).stringify(this)},concat:function(a){var b=this.words,d=a.words,c=this.sigBytes;if(a=a.sigBytes,this.clamp(),c%4)for(var e=0;a>e;e++)b[c+e>>>2]|=(d[e>>>2]>>>24-8*(e%4)&255)<<24-8*((c+e)%4);else if(65535<d.length)for(e=0;a>e;e+=4)b[c+e>>>2]=d[e>>>2];else b.push.apply(b,d);return this.sigBytes+=a,this},clamp:function(){var a=this.words,b=this.sigBytes;a[b>>>2]&=4294967295<<32-8*(b%4),a.length=h.ceil(b/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(a){for(var b=[],d=0;a>d;d+=4)b.push(4294967296*h.random()|0);return new j.init(b,a)}}),m=k.enc={},s=m.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var d=[],c=0;a>c;c++){var e=b[c>>>2]>>>24-8*(c%4)&255;d.push((e>>>4).toString(16)),d.push((15&e).toString(16))}return d.join("")},parse:function(a){for(var b=a.length,d=[],c=0;b>c;c+=2)d[c>>>3]|=parseInt(a.substr(c,2),16)<<24-4*(c%8);return new j.init(d,b/2)}},p=m.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var d=[],c=0;a>c;c++)d.push(String.fromCharCode(b[c>>>2]>>>24-8*(c%4)&255));return d.join("")},parse:function(a){for(var b=a.length,d=[],c=0;b>c;c++)d[c>>>2]|=(255&a.charCodeAt(c))<<24-8*(c%4);return new j.init(d,b)}},t=m.Utf8={stringify:function(a){try{return decodeURIComponent(escape(p.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return p.parse(unescape(encodeURIComponent(a)))}},q=l.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new j.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=t.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(a){var b=this._data,d=b.words,c=b.sigBytes,e=this.blockSize,f=c/(4*e),f=a?h.ceil(f):h.max((0|f)-this._minBufferSize,0);if(a=f*e,c=h.min(4*a,c),a){for(var g=0;a>g;g+=e)this._doProcessBlock(d,g);g=d.splice(0,a),b.sigBytes-=c}return new j.init(g,c)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});l.Hasher=q.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){q.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,d){return new a.init(d).finalize(b)}},_createHmacHelper:function(a){return function(b,d){return new u.HMAC.init(a,d).finalize(b)}}});var u=k.algo={};return k}(Math);!function(){var h=CryptoJS,j=h.lib.WordArray;h.enc.Base64={stringify:function(b){var e=b.words,f=b.sigBytes,c=this._map;b.clamp(),b=[];for(var a=0;f>a;a+=3)for(var d=(e[a>>>2]>>>24-8*(a%4)&255)<<16|(e[a+1>>>2]>>>24-8*((a+1)%4)&255)<<8|e[a+2>>>2]>>>24-8*((a+2)%4)&255,g=0;4>g&&f>a+.75*g;g++)b.push(c.charAt(d>>>6*(3-g)&63));if(e=c.charAt(64))for(;b.length%4;)b.push(e);return b.join("")},parse:function(b){var e=b.length,f=this._map,c=f.charAt(64);c&&(c=b.indexOf(c),-1!=c&&(e=c));for(var c=[],a=0,d=0;e>d;d++)if(d%4){var g=f.indexOf(b.charAt(d-1))<<2*(d%4),h=f.indexOf(b.charAt(d))>>>6-2*(d%4);c[a>>>2]|=(g|h)<<24-8*(a%4),a++}return j.create(c,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}();var Hashids=function(){"use strict";function Hashids(salt,minHashLength,alphabet){var uniqueAlphabet,i,j,len,sepsLength,diff,guardCount;for(this.version="1.0.1",this.minAlphabetLength=16,this.sepDiv=3.5,this.guardDiv=12,this.errorAlphabetLength="error: alphabet must contain at least X unique characters",this.errorAlphabetSpace="error: alphabet cannot contain spaces",this.alphabet="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",this.seps="cfhistuCFHISTU",this.minHashLength=parseInt(minHashLength,10)>0?minHashLength:0,this.salt="string"==typeof salt?salt:"","string"==typeof alphabet&&(this.alphabet=alphabet),uniqueAlphabet="",i=0,len=this.alphabet.length;i!==len;i++)-1===uniqueAlphabet.indexOf(this.alphabet[i])&&(uniqueAlphabet+=this.alphabet[i]);if(this.alphabet=uniqueAlphabet,this.alphabet.length<this.minAlphabetLength)throw this.errorAlphabetLength.replace("X",this.minAlphabetLength);if(-1!==this.alphabet.search(" "))throw this.errorAlphabetSpace;for(i=0,len=this.seps.length;i!==len;i++)j=this.alphabet.indexOf(this.seps[i]),-1===j?this.seps=this.seps.substr(0,i)+" "+this.seps.substr(i+1):this.alphabet=this.alphabet.substr(0,j)+" "+this.alphabet.substr(j+1);this.alphabet=this.alphabet.replace(/ /g,""),this.seps=this.seps.replace(/ /g,""),this.seps=this.consistentShuffle(this.seps,this.salt),(!this.seps.length||this.alphabet.length/this.seps.length>this.sepDiv)&&(sepsLength=Math.ceil(this.alphabet.length/this.sepDiv),1===sepsLength&&sepsLength++,sepsLength>this.seps.length?(diff=sepsLength-this.seps.length,this.seps+=this.alphabet.substr(0,diff),this.alphabet=this.alphabet.substr(diff)):this.seps=this.seps.substr(0,sepsLength)),this.alphabet=this.consistentShuffle(this.alphabet,this.salt),guardCount=Math.ceil(this.alphabet.length/this.guardDiv),this.alphabet.length<3?(this.guards=this.seps.substr(0,guardCount),this.seps=this.seps.substr(guardCount)):(this.guards=this.alphabet.substr(0,guardCount),this.alphabet=this.alphabet.substr(guardCount))}return Hashids.prototype.encode=function(){var i,len,ret="",numbers=Array.prototype.slice.call(arguments);if(!numbers.length)return ret;for(numbers[0]instanceof Array&&(numbers=numbers[0]),i=0,len=numbers.length;i!==len;i++)if("number"!=typeof numbers[i]||numbers[i]%1!==0||numbers[i]<0)return ret;return this._encode(numbers)},Hashids.prototype.decode=function(hash){var ret=[];return hash.length&&"string"==typeof hash?this._decode(hash,this.alphabet):ret},Hashids.prototype.encodeHex=function(str){var i,len,numbers;if(str=str.toString(),!/^[0-9a-fA-F]+$/.test(str))return"";for(numbers=str.match(/[\w\W]{1,12}/g),i=0,len=numbers.length;i!==len;i++)numbers[i]=parseInt("1"+numbers[i],16);return this.encode.apply(this,numbers)},Hashids.prototype.decodeHex=function(hash){var i,len,ret=[],numbers=this.decode(hash);for(i=0,len=numbers.length;i!==len;i++)ret+=numbers[i].toString(16).substr(1);return ret},Hashids.prototype._encode=function(numbers){var ret,lottery,i,len,number,buffer,last,sepsIndex,guardIndex,guard,halfLength,excess,alphabet=this.alphabet,numbersSize=numbers.length,numbersHashInt=0;for(i=0,len=numbers.length;i!==len;i++)numbersHashInt+=numbers[i]%(i+100);for(lottery=ret=alphabet[numbersHashInt%alphabet.length],i=0,len=numbers.length;i!==len;i++)number=numbers[i],buffer=lottery+this.salt+alphabet,alphabet=this.consistentShuffle(alphabet,buffer.substr(0,alphabet.length)),last=this.hash(number,alphabet),ret+=last,numbersSize>i+1&&(number%=last.charCodeAt(0)+i,sepsIndex=number%this.seps.length,ret+=this.seps[sepsIndex]);for(ret.length<this.minHashLength&&(guardIndex=(numbersHashInt+ret[0].charCodeAt(0))%this.guards.length,guard=this.guards[guardIndex],ret=guard+ret,ret.length<this.minHashLength&&(guardIndex=(numbersHashInt+ret[2].charCodeAt(0))%this.guards.length,guard=this.guards[guardIndex],ret+=guard)),halfLength=parseInt(alphabet.length/2,10);ret.length<this.minHashLength;)alphabet=this.consistentShuffle(alphabet,alphabet),ret=alphabet.substr(halfLength)+ret+alphabet.substr(0,halfLength),excess=ret.length-this.minHashLength,excess>0&&(ret=ret.substr(excess/2,this.minHashLength));return ret},Hashids.prototype._decode=function(hash,alphabet){var lottery,len,subHash,buffer,ret=[],i=0,r=new RegExp("["+this.guards+"]","g"),hashBreakdown=hash.replace(r," "),hashArray=hashBreakdown.split(" ");if((3===hashArray.length||2===hashArray.length)&&(i=1),hashBreakdown=hashArray[i],"undefined"!=typeof hashBreakdown[0]){for(lottery=hashBreakdown[0],hashBreakdown=hashBreakdown.substr(1),r=new RegExp("["+this.seps+"]","g"),hashBreakdown=hashBreakdown.replace(r," "),hashArray=hashBreakdown.split(" "),i=0,len=hashArray.length;i!==len;i++)subHash=hashArray[i],buffer=lottery+this.salt+alphabet,alphabet=this.consistentShuffle(alphabet,buffer.substr(0,alphabet.length)),ret.push(this.unhash(subHash,alphabet));this._encode(ret)!==hash&&(ret=[])}return ret},Hashids.prototype.consistentShuffle=function(alphabet,salt){var integer,j,temp,i,v,p;if(!salt.length)return alphabet;for(i=alphabet.length-1,v=0,p=0;i>0;i--,v++)v%=salt.length,p+=integer=salt[v].charCodeAt(0),j=(integer+v+p)%i,temp=alphabet[j],alphabet=alphabet.substr(0,j)+alphabet[i]+alphabet.substr(j+1),alphabet=alphabet.substr(0,i)+temp+alphabet.substr(i+1);return alphabet},Hashids.prototype.hash=function(input,alphabet){var hash="",alphabetLength=alphabet.length;do hash=alphabet[input%alphabetLength]+hash,input=parseInt(input/alphabetLength,10);while(input);return hash},Hashids.prototype.unhash=function(input,alphabet){var pos,i,number=0;for(i=0;i<input.length;i++)pos=alphabet.indexOf(input[i]),number+=pos*Math.pow(alphabet.length,input.length-i-1);return number},"function"==typeof define&&"object"==typeof define.amd&&define.amd&&define(function(){return Hashids},[]),Hashids}();"undefined"!=typeof module&&(module.exports=Hashids);var pound={};pound.VERSION="2.0",pound.ENV="dev",pound.VERTICAL="default",pound.BUZZID=void 0,pound.BUZZ_NAME=void 0,pound.TIMESTAMP=138e7,"undefined"==typeof pound.LOGGED_IN_ONLY&&(pound.LOGGED_IN_ONLY=!0),"undefined"==typeof pound.VERIFY_IDENTITIES&&(pound.VERIFY_IDENTITIES=!1),"undefined"!=typeof Date?pound.TIMESTAMP=(new Date).getTime():"undefined"!=typeof Math&&"undefined"!=typeof Math.random?pound.TIMESTAMP=Math.random():pound.TIMESTAMP=0,"undefined"==typeof pound.SOCIAL_COUNTS&&(pound.SOCIAL_COUNTS={facebook_shares:0,twitter_shares:0});var bf_static_was_undefined=!1;if("undefined"!=typeof BF_STATIC?(pound.ENV=BF_STATIC.bf_env?BF_STATIC.bf_env:"dev",pound.VERTICAL=BF_STATIC.vertical||"default",pound.BUZZID=BF_STATIC.campaignid,pound.BUZZ_NAME=BF_STATIC.buzz_name,pound.TIMESTAMP=BF_STATIC.generated_timestamp):bf_static_was_undefined=!0,"undefined"==typeof pound.VERIFY_IDENTITIES&&(pound.VERIFY_IDENTITIES=!1),pound.FONTS=["Andale Mono","Arial Black","Arnoldboecklin","Avantgarde","Blippo","Book Antiqua","Brushstroke","Charcoal","Comic Sans","Comic Sans MS","Coronetscript","Courier","Courier New","Fixed","Florence","Gadget","Geneva","Georgia","Gill Sans","Helvetica","Helvetica Narrow","Impact","Lucida Console","Lucida Grande","Lucida Sans Unicode","Lucidatypewriter","MS Sans Serif","MS Serif","Monaco","New Century Schoolbook","New York","Oldtown","Palatino","Palatino Linotype","Parkavenue","Symbol","Tahoma","Times","Times New Roman","Trebuchet MS","Verdana","Webdings","Zapf Chancery","cursive","fantasy","monospace","sans-serif","serif"],pound.ACTIVEX_PLUGINS=["AOL Toolbar","Activeweave","Advanced searchbar","Affine","AhnLab SiteGuard","Alexa Toolbar","Altavista toolbar","Bing Bar","Browser toolbar","Data Toolbar","DeeperWeb","DoNotTrackMe","Earthlink toolbar","FeedsPlus","Fiddler","GeoSurf","Ghostery","Gofor-It Internet Explorer","Google Toolbar","IE Ad-dons","IE Developer toolbar","IE7pro","IMacros","LastPass Password Manager","LuckyTabSave","MSFeedIcon","Microsoft Internet Mail and News","Microsoft NetMeeting","Mitto Password Manager","Mouse Gestures for Internet Explorer","Offer Assistant","Outlook Express","Quero","SafeWallet Password Manager","Simple Adblock","Speckle","SpoofStick","Stickis","Streaming Internet Radio Toolbar","Surf Canyon","Turn Off the Lights","Vivisimo MiniBar","WOT Services","WebNotes","Windows Address Book","Windows Live Toolbar","Windows Messaging","Xmarks Sync","Xupiter","Yahoo! Axis","Yahoo! Toolbar","Yolink","Zemanta"],pound.lib={},"undefined"==typeof Base64)var Base64={encode:function(a){return encodeURIComponent(a)},decode:function(a){return decodeURIComponent(a)}};if(pound.lib.decodeCascadeString=function(cascade_string){if(!cascade_string||"undefined"==cascade_string)return{};var decoded=Base64.decode(unescape(cascade_string));decoded&&decoded.length>0&&"?"==decoded[0]&&(decoded=decoded.substr(1,decoded.length));var parsed=pound.lib.parseQueryString(decoded,"/");for(var key in parsed)if(parsed.hasOwnProperty(key)){var typ=(typeof parsed[key]).toLowerCase();if("string"!=typ&&"object"!=typ)return{};if("t"!=key&&"o"!=key&&"v"!=key&&"b"!=key&&"u"!=key)return{}}return parsed},pound.lib.encodeCascadeObject=function(cascade_object){return Base64.encode(pound.lib.createQueryString(cascade_object,"/"))},pound.lib.setCookie=function(key,value,expiry,path){var i,pair,equalities=[],pairs=[[key,escape(value)],["expires",expiry],["path",path]];for(i=0;i<pairs.length;i++)pair=pairs[i],equalities.push(pair.join("="));var ck=equalities.join("; ")+";";return document.cookie=ck,ck},pound.lib.getCookie=function(key){var cookie=document.cookie,start=cookie.indexOf(key+"="),end=cookie.indexOf(";",start);0>end&&(end=cookie.length);var kv_pair=cookie.slice(start,end).split("=");return kv_pair[1]},pound.lib.expireCookie=function(key){var exdate=new Date;exdate.setDate(exdate.getDate()-60),pound.lib.setCookie(key,"",exdate.toUTCString(),"/"),pound.lib.setCookie(key,"",exdate.toUTCString(),"")},pound.lib.createQueryString=function(params,delimiter){var value,query_string=[];if("undefined"==typeof delimiter&&(delimiter="&"),null===params||void 0===params)return"";if(params==={})return"?";for(var key in params)params.hasOwnProperty(key)&&(value=params[key],null===value&&(value=""),void 0===value?query_string.push(key):query_string.push(key+"="+value));return"?"+query_string.join(delimiter)},pound.lib.parseQueryString=function(qs,delimiter){if(""==qs||void 0==qs||null==qs)return{};"undefined"==typeof delimiter&&(delimiter="&");for(var pair,key,value,params=qs.split(delimiter),obj={},i=0;i<params.length;i++)pair=params[i].split("="),key=pair[0],value=pair.length>1?pair.slice(1).join("=")||null:void 0,obj[key]=value;return obj},pound.lib.getSubBuzzIdFromChildNode=function(node){if(!node)throw new Error("No node was passed to getSubBuzzIdFromChildNode");for(var target_class=/buzz_superlist_item/;node.parentNode&&(!node.hasAttribute("class")||!node.getAttribute("class").match(target_class));)node=node.parentNode;return node.getAttribute("id").replace("superlist_","")},pound.lib.bind=function(el,eventType,callback){window.addEventListener?el.addEventListener(eventType,callback,!1):window.attachEvent?el.attachEvent("on"+eventType,callback):el["on"+eventType]=callback},pound.lib.unbind=function(el,eventType,callback){el&&(el.removeEventListener?el.removeEventListener(eventType,callback,!1):el.detachEvent?el.detachEvent("on"+eventType,callback):el["on"+eventType]=function(e){return!1})},pound.lib.endEvent=function(evt){return evt&&(evt.cancelBubble=!0,evt.returnValue=!1,evt.stopPropagation&&evt.stopPropagation(),"undefined"!=typeof evt.preventDefault&&evt.preventDefault()),!1},pound.lib.walk=function(el,should_return,should_traverse){if(!el)return el;for(var found,i=0;i<el.childNodes.length;i++){if(should_return(el.childNodes.item(i)))found=el.childNodes.item(i);else{if(!should_traverse(el.childNodes.item(i)))continue;found=pound.lib.walk(el.childNodes.item(i),should_return,should_traverse)}if(found)return found}},pound.lib.isInView=function(element,partial,direction){if(!element.offsetParent)return!1;var html=document.documentElement,windowHeight=window.innerHeight||html.clientHeight,windowWidth=window.innerWidth||html.clientWidth,direction=direction?direction:"both",rec=element.getBoundingClientRect(),topVisible=rec.top>=0&&rec.top<windowHeight,topAboveView=rec.top<=0,bottomVisible=rec.bottom>0&&rec.bottom<=windowHeight,bottomBelowView=rec.bottom>=windowHeight,leftVisible=rec.left>=0&&rec.left<windowWidth,leftLeftOfView=rec.left<=0,rightVisible=rec.right>0&&rec.right<=windowWidth,rightRightOfView=rec.right>=windowWidth,vVisible=partial?topVisible||bottomVisible||topAboveView&&bottomBelowView:topVisible&&bottomVisible,hVisible=partial?leftVisible||rightVisible||leftLeftOfView&&rightRightOfView:leftVisible&&rightVisible;return"both"===direction?vVisible&&hVisible:"vertical"===direction?vVisible:"horizontal"===direction?hVisible:void 0},pound.lib.isMobileReady=function(){return"android"===BF_STATIC.os&&BF_STATIC.app_version<49e3||"ios"===BF_STATIC.os&&BF_STATIC.app_version<48e3?!1:!0},pound.lib.getReferrer=function(documentReferrer){if(void 0==documentReferrer&&(documentReferrer=document.referrer),"string"==typeof documentReferrer&&documentReferrer.indexOf("/h1/")>-1){var hashtrackCookie=pound.lib.getCookie("HT_PRIMARY");if(void 0!==hashtrackCookie){var referrer=decodeURIComponent(hashtrackCookie).split(",");if(referrer.length>4)return"not_available"===referrer[4]?"":referrer[4]}}return documentReferrer},pound.lib.optOut=function(){var exdate=new Date;exdate.setDate(exdate.getDate()+1e4),pound.lib.setCookie("pound_opt_out","1",exdate.toUTCString(),"/"),pound.lib.OPTED_OUT=!0,alert(local.t("You have successfully opted out."))},pound.lib.optedOut=function(){return"undefined"==typeof pound.lib.OPTED_OUT&&(pound.lib.getCookie("pound_opt_out")?pound.lib.OPTED_OUT=!0:pound.lib.OPTED_OUT=!1),pound.lib.OPTED_OUT},"undefined"==typeof pound&&(pound={}),"undefined"==typeof pound.sharing&&(pound.sharing={}),pound.sharing.hooks=new function(){var _this=this;_this.hooks=[],this.register=function(callable){"undefined"!=typeof callable&&_this.hooks.push(callable)},this.execute=function(el){for(var i=0;i<_this.hooks.length;i++)_this.hooks[i](el)}},"undefined"==typeof pound)var pound={};if("undefined"==typeof pound.identity&&(pound.identity={}),pound.identity.Unique=function(id){function _init(){var r=NaN;if(id)_this.id=id;else for(var i=0;10>i&&isNaN(r);i++)_this.id=parseInt(1e10*Math.random())}var _this=this,_base36=new RegExp("[0-9A-Za-z]+");this.hashed=function(){var salt=parseInt(25*Math.random()+10).toString(36)+parseInt(25*Math.random()+10).toString(36),hashids=new Hashids(salt),id=hashids.encode(_this.id);return"."+salt+id},this.munge=function(){var munged=parseInt(_this.id);return isNaN(_this.id)?null:munged},this.unhashed=function(id){if(!id)throw new Error("Id is a required parameter");if(0!==id.indexOf(".")){var m=_base36.exec(id);return null!==m&&m[0]==id?parseInt(id,36):!1}var salt=id.substr(1,2),str_id=id.substr(3),hashids=(parseInt(str_id,36),new Hashids(salt));return hashids.decode(str_id)[0]},this.toString=function(){return _this.id.toString()},this.validate=function(id){var validateId=id?id:_this.id;return!validateId||isNaN(validateId)||validateId>25e9?!1:!0},this.getCategory=function(){return!_this.id||isNaN(_this.id)?void 0:_this.id<=1e10?"user":_this.id<=15e9?"promotion":_this.id<=25e9?"mobile_app_user":void 0},_init()},"undefined"!=typeof module&&(module.exports=pound.identity.Unique),"undefined"==typeof pound)var pound={};if("undefined"==typeof pound.identity&&(pound.identity={}),pound.identity.Buzzfeed=function(){if("undefined"!=typeof BF_User){var userid=(new BF_User).getUserInfo().userid;return userid}return default_buzzfeed_id()},pound.Validate=new function(){var _this=this,_base36=new RegExp("[0-9A-Za-z]+");this.stringId=function(id){if(!id||!id.length||isNaN(parseInt(id,36)))return!1;var m=_base36.exec(id);return null!=m&&m[0]==id?!0:!1},this.cookie=function(){var c=pound.lib.parseQueryString(unescape(pound.lib.getCookie("bf_visit")));return _this.idObject(c)},this.idObject=function(o){var invalid={};return o.u&&!_this.stringId(o.u)&&(invalid.u=o.u),o.o&&!_this.stringId(o.o)&&(invalid.o=o.o),o.t&&!_this.stringId(o.t)&&(invalid.t=o.t),invalid},this.shareObject=function(o){var invalid={};return o.u&&!_this.stringId(o.u)&&(invalid.u=o.u),o.c&&isNaN(o.c)&&(invalid.c=o.c),o.p&&isNaN(o.p)&&(invalid.p=o.p),invalid},this.munge=function(invalid_id){for(;invalid_id&&invalid_id.length&&invalid_id.length>0;){if(_this.stringId(invalid_id))return invalid_id;invalid_id=invalid_id.substr(0,invalid_id.length-1)}return!1}},pound.UrlRewriting=function(){var _this=this;this.init=function(){_this.utm_param="utm_term",_this.protocol=window.location.protocol,_this.domain=window.location.hostname,_this.path=_this._removePoundSegment(window.location.pathname),_this.baseHashString=window.location.hash.substr(1,window.location.hash.length),_this.baseQueryString=window.location.search.substr(1,window.location.search.length);var qs=pound.lib.parseQueryString(_this.baseQueryString);"undefined"!=typeof qs.qa&&"1"==qs.qa&&(_this.domain=_this.domain.replace("dev.","www."),_this.pathname=_this.pathname.replace("/bf2",""))},this.hasPoundSegment=function(){var segment=window.location.pathname.match(/\/p\/\.[a-zA-Z0-9]+/);return segment&&segment.length?!0:!1},this.getHistoryState=function(){var search=_this._removeQueryString(_this.baseQueryString);return search=search?"?"+search:"",_this.path.match(/^\/bf2/)?"/bf2"+_this.getPoundSegment()+"/"+_this.path.replace(/^\/bf2\//,"")+search:_this.getPoundSegment()+_this.path+search},this.getPoundSegment=function(){return"/p/"+window.bf_visit.unique.hashed()},this._removePoundSegment=function(url){return url.replace(/\/p\/\.[a-zA-Z0-9]+/,"")},this.getBaseUrl=function(){var port=window.location.port?":"+window.location.port:"";return _this.protocol+"//"+_this.domain+port+_this.path},this._getCascadeString=function(){var sharer=window.bf_visit.sharer.hashed(),current=window.bf_visit.unique.hashed();return"undefined"!=typeof sharer?pound.lib.encodeCascadeObject({t:sharer.hashed(),o:current.hashed()}):pound.lib.encodeCascadeObject({o:current.hashed()})},this._addHash=function(url){if(pound.lib.optedOut())return url;var hash=window.bf_visit.unique.hashed();return _this._removeHash(url)+(void 0!==hash?"#"+hash:"")},this._removeHash=function(url){return url.indexOf("#")>-1?url.substr(0,url.indexOf("#")):url},this._removeQueryString=function(url){var hash=_this._getHash(url);return url.indexOf("?")>-1?url.substr(0,url.indexOf("?"))+(void 0!==hash?"#"+hash:""):url},this._getHash=function(url){return url.indexOf("#")>-1?url.substr(url.indexOf("#")+1,url.length):void 0},this._getQueryString=function(url){return url=_this._removeHash(url),url.indexOf("?")>-1?url.substr(url.indexOf("?")+1,url.length):void 0},this._addQueryString=function(url,additional_params,additional_keyvals){if(pound.lib.optedOut())return url;var pname,hash=_this._getHash(url),qs=pound.lib.parseQueryString(_this._getQueryString(url));if(url=_this._removeHash(url),url=_this._removeQueryString(url),qs[_this.utm_param]=window.bf_visit.unique.hashed(),"undefined"!=typeof additional_params)for(var i=0;i<additional_params.length;i++)pname=additional_params[i],qs[pname]=escape(window.bf_visit.unique.hashed());if("undefined"!=typeof additional_keyvals)for(i=0;i<additional_keyvals.length;i++)pname=additional_keyvals[i][0],pval=additional_keyvals[i][1],qs[pname]=pval;var r=url+pound.lib.createQueryString(qs)+(hash?"#"+hash:"");return r},this.poundSegmentOnly=function(){return _this.path.match(/^\/bf2/)?_this.protocol+"//"+_this.domain+"/bf2"+_this.getPoundSegment()+"/"+_this.path.replace(/^\/bf2\//,""):_this.protocol+"//"+_this.domain+_this.getPoundSegment()+_this.path},this.hashOnly=function(){return _this.hasPoundSegment()?escape(_this.poundSegmentOnly()):escape(_this._addHash(_this.getBaseUrl()))},this.queryStringOnly=function(additional_params,additional_keyvals){var with_querystring;return _this.hasPoundSegment()?escape(_this.poundSegmentOnly()):(with_querystring="undefined"!=typeof additional_params?_this._addQueryString(_this.getBaseUrl(),additional_params,additional_keyvals):_this._addQueryString(_this.getBaseUrl()),escape(with_querystring))},this.hashAndQueryString=function(additional_params,additional_keyvals){return _this.hasPoundSegment()?escape(_this.poundSegmentOnly()):"undefined"!=typeof additional_params?escape(_this._addHash(_this._addQueryString(_this.getBaseUrl(),additional_params,additional_keyvals))):escape(_this._addHash(_this._addQueryString(_this.getBaseUrl())))},this.stripped=function(){return _this.getBaseUrl()},this.unescaped={hashOnly:function(){return unescape(_this.hashOnly())},queryStringOnly:function(additional_params,additional_keyvals){return unescape(_this.queryStringOnly(additional_params,additional_keyvals))},hashAndQueryString:function(additional_params,additional_keyvals){return unescape(_this.hashAndQueryString(additional_params,additional_keyvals))}},this.setBaseUrl=function(base_url){_this.baseUrl=_this._removePoundSegment(_this._removeQueryString(_this._removeHash(base_url))),_this.baseQueryString=base_url.substr(base_url.indexOf("?"),base_url.length),_this.baseHashString=base_url.substr(base_url.indexOf("#"),base_url.length)}},pound.urls=new pound.UrlRewriting,pound.poundEvents=function(){function processEvent(evt,shouldFlush){if(!BF_STATIC.pound_enabled||BF_STATIC.mobile_app&&!pound.lib.isMobileReady()||"undefined"==typeof pixiedust&&!window.BZFD)return!1;var message_data=_decorateEventData(evt);return events.messageNo++,window.BZFD&&window.bfa?window.bfa("track/pound/"+message_data.type,{data:message_data}):(pixiedust.push(message_data)||(delete message_data.r,pixiedust.push(message_data)),shouldFlush&&pixiedust.flush()),!0}function _decorateEventData(evt){if(!evt.type)throw new Error("Pound Events: missing type from message_data");return evt.v=pound.VERSION,evt.r=pound.lib.getReferrer(),evt}var events={processEvent:processEvent,messageNo:0};return events}(),function(){var pound=window.pound;pound.widgets=function(){function scrollResizeHandler(){scrollResizeTimer&&clearTimeout(scrollResizeTimer),scrollResizeTimer=setTimeout(_checkVisibility,500)}function addWidget(widget){void 0===poundWidgets.widgets[widget.widget_id]?poundWidgets.widgets[widget.widget_id]=[widget]:poundWidgets.widgets[widget.widget_id].push(widget)}function addImpression(widget_id,buzz_id,buzz_data){poundWidgets.impression_count++,evt.processEvent({widget_id:widget_id,
buzz_id:buzz_id,buzz_type:buzz_data.buzz_type,type:"buzz_recommendation_impression",variation:buzz_data.variation,fallback:buzz_data.fallback})}function updateWidgetIds(widget_ids){for(var j=0;j<widget_ids.length;j++){var widget_id=widget_ids[j],key_widgets=poundWidgets.widgets[widget_id];if(void 0!==key_widgets){for(var len=key_widgets.length,i=0;len>i;i++){var widget=key_widgets.shift();widget.widget_id=widget.container.getAttribute("pound_position"),addWidget(widget)}0===poundWidgets.widgets[widget_id].length&&delete poundWidgets.widgets[widget_id]}}}function _checkVisibility(){for(var key in poundWidgets.widgets)for(var key_widgets=poundWidgets.widgets[key],i=0;i<key_widgets.length;i++)key_widgets[i]._recalculateInView(!0)}function process(){Array.prototype.forEach.call(document.getElementsByClassName(widgetClass),pound.Widget)}var widgetClass="js-pound-widget",poundWidgets={process:process,addWidget:addWidget,addImpression:addImpression,updateWidgetIds:updateWidgetIds,impression_count:0,widgets:{}},scrollResizeTimer=null;pound.lib.bind(window,"scroll",scrollResizeHandler),pound.lib.bind(window,"resize",scrollResizeHandler);var evt=pound.poundEvents;return poundWidgets}(),window.bf_widgets=pound.widgets;var promoted_regex=/(^|\s)preview-(\d+)(\s|$)/;pound.Widget=function(container){return this instanceof pound.Widget?(this.init=function(){if(this.container=container,this.widget_id=container.getAttribute("pound_position"),this.buzzes={},this.impressions=[],this.in_view=this._recalculateInView(!0),bf_widgets.addWidget(this),BF_STATIC.pound_widget_tracking_enabled){var _this=this;pound.lib.bind(container,"click",function(evt){_this._trackClickEvent(evt)})}this.evt=pound.poundEvents},this._recalculateInView=function(partial,direction){if(this.in_view=pound.lib.isInView(this.container,partial,direction),this.in_view){this.locate_buzzes();for(var buzz_id in this.buzzes)this.buzzes[buzz_id].sent||(this.buzzes[buzz_id].seen=pound.lib.isInView(this.buzzes[buzz_id].element,!0),BF_STATIC.pound_widget_tracking_enabled&&this.buzzes[buzz_id].seen&&(this.buzzes[buzz_id].sent=!0,bf_widgets.addImpression(this.widget_id,buzz_id,this.buzzes[buzz_id])))}return this.in_view},this.isPartnerBuzz=function(element){var match=promoted_regex.exec(element.className);return match?match[2]:null},this.locate_buzzes=function(){for(var allElements=this.container.getElementsByTagName("*"),i=0,n=allElements.length;n>i;i++){var buzz_id=allElements[i].getAttribute("rel:buzz_id");if(!buzz_id||buzz_id in this.buzzes){var partnerBuzzId=this.isPartnerBuzz(allElements[i]);!partnerBuzzId||partnerBuzzId in this.buzzes||(this.buzzes[partnerBuzzId]={buzz_id:partnerBuzzId,element:allElements[i],buzz_type:"ad"})}else this.buzzes[buzz_id]={buzz_id:buzz_id,element:allElements[i].parentNode,buzz_type:"editorial"}}return this.buzzes},this._trackClick=function(target,click_event){for(var buzz_id=null,aTag=null,buzz_type=null;target!==this.container;){if(target.tagName&&"A"===target.tagName.toUpperCase()&&(aTag=target),target.getAttribute("rel:buzz_id")){buzz_id=target.getAttribute("rel:buzz_id"),buzz_type="editorial";break}var partnerBuzzId=this.isPartnerBuzz(target);if(partnerBuzzId){buzz_id=partnerBuzzId,buzz_type="ad";break}target=target.parentNode}null!==buzz_id&&null!==aTag&&(this.evt.processEvent({widget_id:this.widget_id,buzz_id:buzz_id,type:"buzz_recommendation_click",buzz_type:buzz_type},!0),window.open(aTag.getAttribute("href"),"_self"))},this._trackClickEvent=function(click_event){var target=click_event.target||click_event.srcElement;this._trackClick(target,click_event)},void this.init()):new pound.Widget(container)}}(),"undefined"==typeof pound)var pound={};if(pound.Share=function(user,buzzid){var _this=this;this.user=user,this.buzzid=buzzid,this.ab="undefined"!=typeof abtest&&"undefined"!=typeof ab_config?abtest.abTestsToString():"",this.toObject=function(){return{u:encodeURIComponent(_this.user.hashed()),s:encodeURIComponent(_this.buzzid)}},this.toMessage=function(){return{buzz_id:_this.buzzid,pound_id:_this.user.id,ab:_this.ab,type:"share",channel:_this.shareChannel}}},pound.UserEdge=function(from,to,buzzid){var _this=this;this.from=from,this.to=to,this.buzzid=buzzid,this.equals=function(a,b){var id=new pound.identity.Unique,from_a=id.unhashed(a.o),to_a=id.unhashed(a.u),from_b=id.unhashed(b.o),to_b=id.unhashed(b.u),bida=id.unhashed(a.c),bidb=id.unhashed(b.c);return"undefined"==typeof from_a||"undefined"==typeof from_b?!1:from_a==from_b&&to_a==to_b&&bida==bidb?!0:!1},this.toObject=function(){return{o:encodeURIComponent(_this.from.hashed()),u:encodeURIComponent(_this.to.hashed()),c:_this.buzzid?encodeURIComponent(_this.buzzid):_this.buzzid}},this.getPlatform=function(){return window.BZFD?"bzfd":BF_STATIC.tt_page&&BF_STATIC.tt_page.indexOf("Mobile")>-1?BF_STATIC.mobile_app?"app":"mobileweb":"web"},this.isAd=function(){return!!BF_STATIC.f_ad},this.toMessage=function(){return{from_client_id:_this.from.id,client_id:_this.to.id,buzz_id:_this.buzzid,type:"user_edge",ad:_this.isAd(),platform:_this.getPlatform()}}},pound.PostEdge=function(from,to,user){var _this=this;this.from=from,this.to=to,this.user=user,this.toObject=function(){return{p:encodeURIComponent(_this.from),c:encodeURIComponent(_this.to),u:encodeURIComponent(_this.user.hashed())}},this.toMessage=function(){return{from_buzz_id:_this.from,to_buzz_id:_this.to,type:"post_edge"}}},pound.UpdatedUnique=function(old_unique,new_unique){var _this=this;this.old_unique=old_unique,this.new_unique=new_unique,this.toObject=function(){return{u1:encodeURIComponent(_this.old_unique),u2:encodeURIComponent(_this.new_unique)}}},pound.Event=function(){var _this=this;this.o={},this.callbacks=[],this.empty=!0,this.merge=function(a){for(var k in a)a.hasOwnProperty(k)&&(_this.o[k]=a[k]);_this.o.r=encodeURIComponent(pound.lib.getReferrer()),_this.o.v=encodeURIComponent(pound.VERSION),_this.empty=!1},this.addCallback=function(callback){_this.callbacks.push(callback)}},pound.Visit=function(){var _this=this;this.init=function(){window.bf_visit=this,this.img=void 0,this.bf=void 0,this.random=void 0,this.sharer=null,this.errors=[],this.poundEvents=pound.poundEvents,this.pixelNo=0,this.OPTED_OUT=void 0,_this.setIdentity(),pound.urls.init(),"complete"===document.readyState?_this.setState():"interactive"===document.readyState?setTimeout(_this.setState.bind(_this),1):document.addEventListener("DOMContentLoaded",_this.setState)},this._removeFromBounces=function(userEdge){var hash=userEdge.o,unhashed=hash?_this.unique.unhashed(hash):hash,buzz_id=userEdge.c;userEdge.u;if(_this._acquireBounceLock()){var key="unprocessed_propagation_events",prop_events=store.get(key),index=-1;if(prop_events&&prop_events.length){for(var i=0,len=prop_events.length;len>i;i++){var evt=prop_events[i],clientId=_this._getClientId(evt[0]);if(unhashed&&!_this.unique.validate(unhashed)&&(unhashed=void 0),(unhashed&&unhashed==_this.unique.unhashed(clientId)||!unhashed&&hash==clientId)&&buzz_id==evt[1]){index=i;break}}index>-1&&prop_events.splice(index,1),store.set(key,prop_events),_this._releaseBounceLock()}}else setTimeout(function(){_this._removeFromBounces(userEdge)},100)},this._releaseBounceLock=function(){if(!_this.bounceLockAcquired)throw new Error("Tried to release a lock that is not acquired.");_this.bounceLockAcquired=!1},this._acquireBounceLock=function(){return _this.bounceLockAcquired?!1:(_this.bounceLockAcquired=!0,!0)},this._processBounces=function(){var key="unprocessed_propagation_events",prop_events=store.get(key);if(prop_events&&"undefined"!=typeof prop_events.shift)for(;prop_events.length;){var evt=prop_events.shift(),from_client_id=_this._getClientId(evt[0]),buzz_id=evt[1],unhashed_cliend_id=(evt[2],_this.unique.unhashed(from_client_id)),userEdge=new pound.UserEdge(new pound.identity.Unique(unhashed_cliend_id),_this.unique,buzz_id);if(unhashed_cliend_id&&_this.unique.validate(unhashed_cliend_id))unhashed_cliend_id!=_this.unique.id&&buzz_id?_this.poundEvents.processEvent(userEdge.toMessage())&&_this._removeFromBounces(userEdge.toObject()):_this._removeFromBounces(userEdge.toObject());else{var userEdgeObj=userEdge.toObject();userEdgeObj.o=from_client_id,_this._removeFromBounces(userEdgeObj)}}},this._getClientId=function(potentialClientId){return"string"==typeof potentialClientId?potentialClientId:potentialClientId.utm_term},this.setState=function(){_this.processCascadeSegment(),"undefined"!=typeof BF_STATIC.pound_enabled&&BF_STATIC.pound_enabled&&!pound.lib.optedOut()&&(window.location.hash="#"+_this.unique.hashed(),"undefined"!=typeof window.history&&(window.location.pathname.match(/\/p\//)?window.history.replaceState({},null,pound.urls.getHistoryState()):window.history.replaceState({},null,pound.urls._addQueryString(window.location.href)))),"undefined"!=typeof document.referrer&&document.referrer.indexOf("buzzfeed.com")>-1&&_this.previous_buzzid&&_this.current_buzzid&&_this.previous_buzzid!=_this.current_buzzid&&_this.recordPostEdge(),_this._processBounces()},this.toJson=function(){return JSON.stringify({sharer:_this.sharer.hashed(),unique:_this.unique.hashed(),bf:_this.bf,current_buzzid:_this.current_buzzid,previous_buzzid:_this.previous_buzzid,errors:_this.errors})},this._parseHash=function(){var hash=window.location.hash.slice(1,window.location.hash.length);if(hash){var unhashed=(new pound.identity.Unique).unhashed(hash);if(unhashed&&!isNaN(unhashed)){var sharer=new pound.identity.Unique(unhashed);sharer.validate()&&(sharer.id!=_this.unique.id?_this.sharer=sharer:_this.sharer=null)}}},this._parseQueryString=function(){var sharer=null;location.search.length>=1&&(params=pound.lib.parseQueryString(location.search.substr(1)),sharer=params.utm_term||params.fb_ref),"undefined"!=typeof sharer&&null!=sharer&&(sharer_id=(new pound.identity.Unique).unhashed(sharer),_this.sharer=new pound.identity.Unique(sharer_id))},this._parseLocalStorage=function(){var sharer=null;if("undefined"!=typeof store&&store.enabled){if(sharer_id=store.get("pound_position")||void 0,sharer_id&&"undefined"!=typeof sharer_id){var id=(new pound.identity.Unique).unhashed(sharer_id);sharer=new pound.identity.Unique(id)}store.set("pound_position",void 0)}"undefined"!=typeof sharer&&null!=sharer&&(this.sharer=sharer)},this._parsePath=function(){for(var path=window.location.pathname,sharer=void 0,segments=path.split("/"),segment_map={},i=0,len=segments.length;len-1>i;i++)segment_map[segments[i]]=segments[i+1];var sharer_id=segment_map.p||void 0;if(sharer_id&&"undefined"!=typeof sharer_id){var id=(new pound.identity.Unique).unhashed(sharer_id);sharer=new pound.identity.Unique(id)}"undefined"!=typeof sharer&&null!=sharer&&(this.sharer=sharer)},this._parseCascadeSegment=function(){_this._parseLocalStorage(),_this._parseQueryString(),_this._parseHash(),_this._parsePath(),_this.sharer&&!_this.sharer.validate()&&(_this.sharer.munge(),_this.sharer.validate()||(_this.errors.push(":4:"+_this.sharer.toString()),_this.sharer=null)),_this.sharer&&void 0!==_this.sharer&&_this.sharer.id==_this.unique.id&&(_this.sharer=null)},this._loadStateFromCookie=function(){var u,id=pound.lib.parseQueryString(unescape(pound.lib.getCookie("bf_visit")));if((void 0!==id.c||id.c!=BF_STATIC.campaignid)&&(_this.previous_buzzid=id.c),void 0===id.b&&void 0===id.u||id.v!=pound.VERSION)return pound.lib.expireCookie("bf_visit"),{success:!1,old_unique:id.u};var u=id.u;return"undefined"==typeof u||(u=(new pound.identity.Unique).unhashed(u),_this.unique=new pound.identity.Unique(u),_this.unique.validate())?(_this.bf=id.b,{success:!0}):(pound.lib.expireCookie("bf_visit"),{success:!1})},this.storeCurrentBPage=function(){var _bf_visit=unescape(pound.lib.getCookie("bf_visit")),qs=pound.lib.parseQueryString(_bf_visit);qs.c=_this.current_buzzid,qs=pound.lib.createQueryString(qs);var exdate=new Date;exdate.setDate(exdate.getDate()+1e4),pound.lib.setCookie("bf_visit",qs.slice(1,qs.length),exdate.toUTCString(),"/")},this._loadStateToCookie=function(){var qs=pound.lib.createQueryString({b:_this.bf,u:_this.unique.hashed(),v:pound.VERSION}),exdate=new Date;exdate.setDate(exdate.getDate()+1e4),pound.lib.setCookie("bf_visit",qs.slice(1,qs.length),exdate.toUTCString(),"/")},this.setIdentity=function(){var retries=0,loadedStateFromCookie=_this._loadStateFromCookie();for(loadedStateFromCookie.success||(_this.bf=pound.identity.Buzzfeed(),_this.unique=new pound.identity.Unique);!_this.unique.validate()&&retries++<10;)_this.unique=new pound.identity.Unique;_this.current_buzzid=BF_STATIC.campaignid,_this.unique.validate()?_this._loadStateToCookie():_this.errors.push(":2:"+_this.unique.toString())},this.recordUserEdge=function(){var userEdge=new pound.UserEdge(_this.sharer,_this.unique,_this.current_buzzid);_this.poundEvents.processEvent(userEdge.toMessage())&&_this._removeFromBounces(userEdge.toObject())},this.recordShare=function(element){var share=new pound.Share(_this.unique,_this.current_buzzid);if(window.bfaBinder){var elem=element||this,platform=window.BZFD?"BZFD":"MobileBuzz"==BF_STATIC.tt_page?"Mobile":"Desktop";if(elem.getAttribute){var result=window.bfaBinder.parser.parse(elem);(result.action||result.description||result.location)&&(share.shareChannel=platform+":"+result.description+":"+result.action+":"+result.location,result.data&&result.data.idx&&(share.shareChannel+=":"+result.data.idx))}}_this.poundEvents.processEvent(share.toMessage())},this.recordPostEdge=function(){var postEdge=new pound.PostEdge(_this.previous_buzzid,_this.current_buzzid,_this.unique);_this.poundEvents.processEvent(postEdge.toMessage())},this.currentUserEdgeNotInLocalStorage=function(){if(null===_this.sharer)return!0;for(var events=(_this.sharer.id,_this.unique.id,_this.current_buzzid,store.get("unprocessed_propagation_events")||[]),i=0,len=events.length;len>i;i++){var e=events[i],ls_sharer=_this.unique.unhashed(_this._getClientId(e[0])),ls_buzzid=e[1];if(_this.sharer==ls_sharer&&_this.current_buzzid==ls_buzzid)return!1}return!0},this.processCascadeSegment=function(){_this._parseCascadeSegment(),_this.storeCurrentBPage(),null!==_this.sharer&&_this.currentUserEdgeNotInLocalStorage()&&_this.recordUserEdge()},this.toString=function(){return"[object pound.Visit]"},_this.init()},window.bf_visit=new pound.Visit,"undefined"!=typeof module)module.exports=pound;else{var pound_retries=0;registerWithBuzzLoader()}if(window.location.hash||window.location.search.indexOf("utm_term")>-1){var key="unprocessed_propagation_events",prop_events=store.get(key),qshash="",hashval="";"string"==typeof window.location.search&&(qs_obj=pound.lib.parseQueryString(window.location.search.slice(1)).utm_term),"string"==typeof window.location.hash&&(hashval=window.location.hash.slice(1)),prop_events||(prop_events=[]),hashval?prop_events.push([hashval,BF_STATIC.campaignid,(new Date).getTime()]):qs_obj&&prop_events.push([qs_obj,BF_STATIC.campaignid,(new Date).getTime()]),store.set(key,prop_events)}